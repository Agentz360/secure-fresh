{
  "inherits": "default",
  "bindings": [
    {
      "comment": "=== VS Code macOS-style keymap for terminals ===",
      "comment2": "Cmd→Ctrl mapping since terminals don't receive Cmd key"
    },

    {
      "comment": "=== Basic Editing (VS Code style) ==="
    },
    {
      "comment": "Ctrl+Shift+Z -> Redo (Mac: ⌘⇧Z)",
      "key": "z",
      "modifiers": ["ctrl", "shift"],
      "action": "redo",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+K -> Delete line (Mac: ⇧⌘K)",
      "key": "k",
      "modifiers": ["ctrl", "shift"],
      "action": "delete_line",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== Navigation (VS Code style) ==="
    },
    {
      "comment": "Ctrl+G -> Go to line (Mac: ⌃G, same as VS Code)",
      "key": "g",
      "modifiers": ["ctrl"],
      "action": "goto_line",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+O -> Go to symbol in file",
      "key": "o",
      "modifiers": ["ctrl", "shift"],
      "action": "command_palette",
      "args": {"filter": "@"},
      "when": "normal"
    },
    {
      "comment": "Ctrl+- -> Navigate back (Mac: ⌃-)",
      "key": "-",
      "modifiers": ["ctrl"],
      "action": "navigate_back",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+- -> Navigate forward (Mac: ⌃⇧-)",
      "key": "-",
      "modifiers": ["ctrl", "shift"],
      "action": "navigate_forward",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== Search (VS Code style) ==="
    },
    {
      "comment": "Note: Ctrl+R is already 'replace' in default keymap",
      "comment2": "Ctrl+H conflicts with terminal backspace, so we don't remap it"
    },
    {
      "comment": "Ctrl+D -> Add selection to next find match (Mac: ⌘D)",
      "key": "d",
      "modifiers": ["ctrl"],
      "action": "add_cursor_next_match",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+L -> Select all (Mac: ⇧⌘L selects all occurrences, here it's select all)",
      "key": "l",
      "modifiers": ["ctrl", "shift"],
      "action": "select_all",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== Code Navigation (VS Code style, F-key alternatives) ==="
    },
    {
      "comment": "Ctrl+Click is standard, but also: Ctrl+. for go to definition",
      "key": ".",
      "modifiers": ["ctrl"],
      "action": "lsp_goto_definition",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+. -> Find all references (replaces ⇧F12)",
      "key": ".",
      "modifiers": ["ctrl", "shift"],
      "action": "lsp_references",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+R -> Rename symbol (replaces F2)",
      "key": "r",
      "modifiers": ["ctrl", "shift"],
      "action": "lsp_rename",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== Multi-cursor (VS Code style) ==="
    },
    {
      "comment": "Ctrl+Alt+Up -> Add cursor above (Mac: ⌥⌘↑)",
      "key": "Up",
      "modifiers": ["ctrl", "alt"],
      "action": "add_cursor_above",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Alt+Down -> Add cursor below (Mac: ⌥⌘↓)",
      "key": "Down",
      "modifiers": ["ctrl", "alt"],
      "action": "add_cursor_below",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== Home/End for Mac terminals ==="
    },
    {
      "comment": "Ctrl+A -> Line start (Mac terminals send this for Home)",
      "key": "a",
      "modifiers": ["ctrl"],
      "action": "move_line_start",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+E -> Line end (Mac terminals send this for End)",
      "key": "e",
      "modifiers": ["ctrl"],
      "action": "move_line_end",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+A -> Select to line start",
      "key": "a",
      "modifiers": ["ctrl", "shift"],
      "action": "select_line_start",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+E -> Select to line end",
      "key": "e",
      "modifiers": ["ctrl", "shift"],
      "action": "select_line_end",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== Word movement (VS Code: ⌥Arrow, works with terminal config) ==="
    },
    {
      "key": "Left",
      "modifiers": ["alt"],
      "action": "move_word_left",
      "args": {},
      "when": "normal"
    },
    {
      "key": "Right",
      "modifiers": ["alt"],
      "action": "move_word_right",
      "args": {},
      "when": "normal"
    },
    {
      "key": "Left",
      "modifiers": ["alt", "shift"],
      "action": "select_word_left",
      "args": {},
      "when": "normal"
    },
    {
      "key": "Right",
      "modifiers": ["alt", "shift"],
      "action": "select_word_right",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Arrow as fallback (works without terminal config)",
      "key": "Left",
      "modifiers": ["ctrl"],
      "action": "move_word_left",
      "args": {},
      "when": "normal"
    },
    {
      "key": "Right",
      "modifiers": ["ctrl"],
      "action": "move_word_right",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== File explorer (VS Code: ⌘B toggles sidebar) ==="
    },
    {
      "comment": "Ctrl+B -> Toggle sidebar/file explorer (Mac: ⌘B)",
      "key": "b",
      "modifiers": ["ctrl"],
      "action": "toggle_file_explorer",
      "args": {},
      "when": "normal"
    },
    {
      "key": "b",
      "modifiers": ["ctrl"],
      "action": "focus_editor",
      "args": {},
      "when": "file_explorer"
    },

    {
      "comment": "=== Error navigation (VS Code style, F8 alternatives) ==="
    },
    {
      "comment": "Ctrl+' -> Next error (easy to reach, near Enter)",
      "key": "'",
      "modifiers": ["ctrl"],
      "action": "jump_to_next_error",
      "args": {},
      "when": "normal"
    },
    {
      "comment": "Ctrl+Shift+' -> Previous error",
      "key": "'",
      "modifiers": ["ctrl", "shift"],
      "action": "jump_to_previous_error",
      "args": {},
      "when": "normal"
    },

    {
      "comment": "=== Terminal mode ==="
    },
    {
      "comment": "Ctrl+\\ -> Toggle keyboard capture (replaces F9)",
      "key": "\\",
      "modifiers": ["ctrl"],
      "action": "toggle_keyboard_capture",
      "args": {},
      "when": "terminal"
    },

    {
      "comment": "=== Prompt context ==="
    },
    {
      "key": "a",
      "modifiers": ["ctrl"],
      "action": "prompt_move_start",
      "args": {},
      "when": "prompt"
    },
    {
      "key": "e",
      "modifiers": ["ctrl"],
      "action": "prompt_move_end",
      "args": {},
      "when": "prompt"
    },
    {
      "key": "Left",
      "modifiers": ["alt"],
      "action": "prompt_move_word_left",
      "args": {},
      "when": "prompt"
    },
    {
      "key": "Right",
      "modifiers": ["alt"],
      "action": "prompt_move_word_right",
      "args": {},
      "when": "prompt"
    },
    {
      "key": "Left",
      "modifiers": ["ctrl"],
      "action": "prompt_move_word_left",
      "args": {},
      "when": "prompt"
    },
    {
      "key": "Right",
      "modifiers": ["ctrl"],
      "action": "prompt_move_word_right",
      "args": {},
      "when": "prompt"
    },

    {
      "comment": "=== Disable Alt+number (Mac international keyboard conflict) ==="
    },
    {
      "key": "0",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "1",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "2",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "3",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "4",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "5",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "6",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "7",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "8",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    },
    {
      "key": "9",
      "modifiers": ["alt"],
      "action": "none",
      "args": {},
      "when": "normal"
    }
  ]
}
